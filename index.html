<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Loading â€” South African Greetings</title>
  <style>
    :root {
      --size: 360px;
      --duration: 3.6s;
    }
    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial;
    }
    .stage {
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(180deg, #0f172a 0%, #071025 100%);
      color: #fff;
      overflow: hidden;
      padding: 20px;
      box-sizing: border-box;
      flex-direction: column;
    }
    .loader-wrap {
      position: relative;
      width: var(--size);
      height: var(--size);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .center-pic {
      width: 120px;
      height: 120px;
      border-radius: 999px;
      overflow: hidden;
      z-index: 30;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #fff0, #ffffff10);
      box-shadow: 0 8px 30px rgba(0,0,0,.6), inset 0 1px 0 rgba(255,255,255,.02);
      backdrop-filter: blur(4px);
    }
    .center-pic img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .circle {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      animation: spin var(--duration) linear infinite;
      z-index: 10;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    .circle .item {
      --angle: 0deg;
      position: absolute;
      left: 50%;
      top: 50%;
      transform-origin: 0 -140px;
      transform: rotate(var(--angle)) translate(-50%, -50%) translateY(-140px) rotate(calc(-1 * var(--angle)));
      white-space: nowrap;
      font-weight: 600;
      font-size: 16px;
      letter-spacing: 0.4px;
      background: rgba(255, 255, 255, 0.03);
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.04);
      backdrop-filter: blur(2px);
    }

    .circle .item span { padding: 2px 6px; }

    .countdown {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 28px;
      color: #cbd5e1;
      font-size: 14px;
      opacity: .95;
      text-align: center;
    }

    .click-msg {
      margin-top: 20px;
      font-size: 1rem;
      color: #38bdf8;
      opacity: 0.9;
      text-align: center;
    }

    @media (max-width:420px) {
      :root { --size: 300px; }
      .center-pic { width: 96px; height: 96px; }
      .circle .item { font-size: 14px; }
    }
  </style>
</head>
<body>
  <!-- background music -->
  <audio id="bgMusic" src="cass(128k).m4a" loop></audio>

  <div class="stage">
    <div class="loader-wrap" role="img" aria-label="Loading â€” greetings in South African languages">
      <div class="circle" id="greetCircle"></div>
      <div class="center-pic" title="Click to skip">
        <img src="fam.jpg" alt="center picture">
      </div>
    </div>

    <div class="click-msg" id="clickMessage">ðŸŽµ Click anywhere to start music & loading...</div>
  </div>

  <div class="countdown" id="countdown">Redirecting in 18s â€” loading greetingsâ€¦</div>

  <script>
    // greetings list
    const greetings = [
      {lang: 'English', text: 'Hello'},
      {lang: 'Afrikaans', text: 'Hallo'},
      {lang: 'isiZulu', text: 'Sawubona'},
      {lang: 'isiXhosa', text: 'Molo'},
      {lang: 'Sepedi (Northern Sotho)', text: 'Dumela'},
      {lang: 'Sesotho (Southern Sotho)', text: 'Lumela'},
      {lang: 'Setswana', text: 'Dumela'},
      {lang: 'siSwati', text: 'Sawubona'},
      {lang: 'Xitsonga', text: 'Xewani'},
      {lang: 'Tshivenda', text: 'Ndaa'},
      {lang: 'isiNdebele', text: 'Lotjhani'}
    ];

    const circle = document.getElementById('greetCircle');
    const audio = document.getElementById('bgMusic');
    const clickMsg = document.getElementById('clickMessage');

    // create rotating greetings
    const count = greetings.length;
    greetings.forEach((g, i) => {
      const el = document.createElement('div');
      el.className = 'item';
      const angle = (360 / count) * i;
      el.style.setProperty('--angle', angle + 'deg');
      el.innerHTML = `<span title="${g.lang}">${g.text}</span>`;
      circle.appendChild(el);
    });

    // play music after user click
    let started = false;
    document.addEventListener('click', () => {
      if (!started) {
        audio.volume = 0.6;
        audio.play().catch(() => console.log("Autoplay blocked until user interaction"));
        clickMsg.textContent = "ðŸŽ¶ Music playing... enjoy the greetings!";
        started = true;

        // start countdown only after click
        const redirectAfter = 18 * 1000;
        const countdownEl = document.getElementById('countdown');
        let remaining = Math.ceil(redirectAfter / 1000);
        const interval = setInterval(() => {
          remaining -= 1;
          if (remaining <= 0) remaining = 0;
          countdownEl.textContent = `Redirecting in ${remaining}s â€” loading greetingsâ€¦`;
          if (remaining === 0) clearInterval(interval);
        }, 1000);

        setTimeout(() => {
          window.location.href = 'fam.html';
        }, redirectAfter);
      }
    }, { once: true });

    // allow Enter key to skip immediately
    document.addEventListener('keydown', e => {
      if (e.key === 'Enter') window.location.href = 'fam.html';
    });
  </script>
</body>
</html>
